---
 libpthread/pthread/pt-setcancelstate.c |    3 ++-
 libpthread/pthread/pt-setcanceltype.c  |    3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

--- a/libpthread/pthread/pt-setcancelstate.c
+++ b/libpthread/pthread/pt-setcancelstate.c
@@ -35,7 +35,8 @@ pthread_setcancelstate (int state, int *
       break;
     }
 
-  *oldstate = p->cancel_state;
+  if (oldstate)
+    *oldstate = p->cancel_state;
   p->cancel_state = state;
 
   return 0;
--- a/libpthread/pthread/pt-setcanceltype.c
+++ b/libpthread/pthread/pt-setcanceltype.c
@@ -35,7 +35,8 @@ pthread_setcanceltype (int type, int *ol
       break;
     }
 
-  *oldtype = p->cancel_type;
+  if (oldtype)
+    *oldtype = p->cancel_type;
   p->cancel_type = type;
 
   return 0;
